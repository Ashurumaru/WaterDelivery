<Window x:Class="WaterDelivery.Views.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WaterDelivery.Views.Windows"
        mc:Ignorable="d"
        Title="АкваВита - Система управления" 
        Height="768" Width="1280"
        WindowStyle="None"
        AllowsTransparency="True"
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        ResizeMode="CanResize">
    <Border CornerRadius="15" Background="{StaticResource BackgroundPrimaryColor}" Effect="{StaticResource CardShadowEffect}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="260"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" CornerRadius="15,0,0,15" Background="{StaticResource PrimaryDarkColor}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Margin="0,30,0,30">
                        <Grid>
                            <Ellipse Width="60" Height="60" Fill="{StaticResource PrimaryLightColor}" HorizontalAlignment="Center" VerticalAlignment="Center"/>

                            <Path Width="40" Height="50" Stretch="Uniform" Fill="White" 
                                  HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Path.Data>
                                    <PathGeometry>
                                        <PathGeometry.Figures>
                                            <PathFigureCollection>
                                                <PathFigure StartPoint="50,0">
                                                    <PathFigure.Segments>
                                                        <PathSegmentCollection>
                                                            <BezierSegment Point1="70,30" Point2="100,70" Point3="100,100"/>
                                                            <BezierSegment Point1="100,140" Point2="70,170" Point3="50,170"/>
                                                            <BezierSegment Point1="30,170" Point2="0,140" Point3="0,100"/>
                                                            <BezierSegment Point1="0,70" Point2="30,30" Point3="50,0"/>
                                                        </PathSegmentCollection>
                                                    </PathFigure.Segments>
                                                </PathFigure>
                                            </PathFigureCollection>
                                        </PathGeometry.Figures>
                                    </PathGeometry>
                                </Path.Data>
                            </Path>
                        </Grid>

                        <TextBlock Text="АкваВита" FontSize="20" FontWeight="SemiBold" Foreground="White" 
                                   HorizontalAlignment="Center" Margin="0,10,0,3"/>
                        <TextBlock Text="УПРАВЛЕНИЕ ДОСТАВКОЙ" FontSize="11" Foreground="White" Opacity="0.7"
                                   HorizontalAlignment="Center"/>
                    </StackPanel>

                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Hidden" Margin="0,20,0,0">
                        <StackPanel>
                            

                            <Button x:Name="btnOrders" Style="{StaticResource TabMenuButtonStyle}" Background="Transparent" Foreground="White"
                                    Height="50" Click="NavigateButton_Click" Margin="10,5,10,5" Tag="OrdersPage">
                                <Grid Width="190">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="40"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Image Grid.Column="0" Source="/Resources/Images/orders_icon.png" Width="20" Height="20"/>

                                    <TextBlock Grid.Column="1" Text="Заказы" VerticalAlignment="Center"/>
                                </Grid>
                            </Button>

                            <Button x:Name="btnClients" Style="{StaticResource TabMenuButtonStyle}" Background="Transparent" Foreground="White"
                                    Height="50" Click="NavigateButton_Click" Margin="10,5,10,5" Tag="ClientsPage">
                                <Grid Width="190">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="40"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Image Grid.Column="0" Source="/Resources/Images/clients_icon.png" Width="20" Height="20"/>

                                    <TextBlock Grid.Column="1" Text="Клиенты" VerticalAlignment="Center"/>
                                </Grid>
                            </Button>

                            <Button x:Name="btnVehicles" Style="{StaticResource TabMenuButtonStyle}" Background="Transparent" Foreground="White"
                                    Height="50" Click="NavigateButton_Click" Margin="10,5,10,5" Tag="VehiclesPage">
                                <Grid Width="190">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="40"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Image Grid.Column="0" Source="/Resources/Images/vehicles_icon.png" Width="20" Height="20"/>

                                    <TextBlock Grid.Column="1" Text="Транспорт" VerticalAlignment="Center"/>
                                </Grid>
                            </Button>

                            <Button x:Name="btnWaterSources" Style="{StaticResource TabMenuButtonStyle}" Background="Transparent" Foreground="White"
                                    Height="50" Click="NavigateButton_Click" Margin="10,5,10,5" Tag="WaterSourcesPage">
                                <Grid Width="190">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="40"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Image Grid.Column="0" Source="/Resources/Images/water_source_icon.png" Width="20" Height="20"/>

                                    <TextBlock Grid.Column="1" Text="Источники воды" VerticalAlignment="Center"/>
                                </Grid>
                            </Button>

                            <Button x:Name="btnProducts" Style="{StaticResource TabMenuButtonStyle}" Background="Transparent" Foreground="White"
                                    Height="50" Click="NavigateButton_Click" Margin="10,5,10,5" Tag="ProductsPage">
                                <Grid Width="190">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="40"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Image Grid.Column="0" Source="/Resources/Images/products_icon.png" Width="20" Height="20"/>

                                    <TextBlock Grid.Column="1" Text="Продукты" VerticalAlignment="Center"/>
                                </Grid>
                            </Button>

                            <Button x:Name="btnHandbook" Style="{StaticResource TabMenuButtonStyle}" Background="Transparent" Foreground="White"
                                Height="50" Click="NavigateButton_Click" Margin="10,5,10,5" Tag="HandbookPage">
                                <Grid Width="190">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="40"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Image Grid.Column="0" Source="/Resources/Images/Handbook_icon.png" Width="20" Height="20"/>

                                    <TextBlock Grid.Column="1" Text="Справочники" VerticalAlignment="Center"/>
                                </Grid>
                            </Button>

                            <Button x:Name="btnReports" Style="{StaticResource TabMenuButtonStyle}" Background="Transparent" Foreground="White"
                                    Height="50" Click="NavigateButton_Click" Margin="10,5,10,5" Tag="ReportsPage">
                                <Grid Width="190">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="40"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Image Grid.Column="0" Source="/Resources/Images/reports_icon.png" Width="20" Height="20"/>

                                    <TextBlock Grid.Column="1" Text="Отчеты" VerticalAlignment="Center"/>
                                </Grid>
                            </Button>

                           
                        </StackPanel>
                    </ScrollViewer>

                    <Border Grid.Row="2" BorderThickness="0,1,0,0" BorderBrush="#30FFFFFF" Padding="15" Margin="20,10,20,15">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Border Grid.Column="0" Width="40" Height="40" CornerRadius="20" Background="{StaticResource PrimaryLightColor}">
                                <TextBlock x:Name="userInitials" Text="{Binding FirstName, StringFormat={}{0:0}, Converter={StaticResource InitialsConverter}}" 
                                           FontSize="16" Foreground="White" 
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>

                            <StackPanel Grid.Column="1" Margin="10,0,0,0" VerticalAlignment="Center">
                                <TextBlock x:Name="userName" Text="{Binding FullName}" FontSize="14" Foreground="White"/>
                                <TextBlock x:Name="userRole" Text="{Binding IsAdmin, Converter={StaticResource RoleNameConverter}}" 
                                           FontSize="11" Foreground="White" Opacity="0.7"/>
                            </StackPanel>

                            <Button Grid.Column="2" Width="30" Height="30" Background="Transparent" BorderThickness="0"
                                    Padding="0" ToolTip="Выйти" Click="LogoutButton_Click">
                                <Path Width="18" Height="18" Stretch="Uniform" Fill="White" Opacity="0.8">
                                    <Path.Data>
                                        <PathGeometry>M16,17V14H9V10H16V7L21,12L16,17M14,2A2,2 0 0,1 16,4V6H14V4H5V20H14V18H16V20A2,2 0 0,1 14,22H5A2,2 0 0,1 3,20V4A2,2 0 0,1 5,2H14Z</PathGeometry>
                                    </Path.Data>
                                </Path>
                            </Button>
                        </Grid>
                    </Border>
                </Grid>
            </Border>

            <Grid Grid.Column="1">
                <DockPanel Height="35" VerticalAlignment="Top" HorizontalAlignment="Stretch" 
                           Background="Transparent" MouseDown="DockPanel_MouseDown">
                    <TextBlock Text="АкваВита - Система управления доставкой воды" Foreground="{StaticResource TextPrimaryColor}"
                               VerticalAlignment="Center" Margin="20,0,0,0" FontSize="13" FontWeight="Medium"/>

                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" HorizontalAlignment="Right" Margin="0,5,15,0">
                        <Button x:Name="btnMinimize" Style="{StaticResource MinimizeButtonStyle}" Click="BtnMinimize_Click"/>
                        <Button x:Name="btnMaximize" Style="{StaticResource MaximizeButtonStyle}" Click="BtnMaximize_Click"/>
                        <Button x:Name="btnClose" Style="{StaticResource CloseButtonStyle}" Click="BtnClose_Click"/>
                    </StackPanel>
                </DockPanel>

                <Border Height="50" VerticalAlignment="Top" Margin="30,35,30,0" 
                        BorderThickness="0,0,0,1" BorderBrush="{StaticResource BorderColor}">
                    <Grid>
                        <TextBlock x:Name="pageTitle" Text="Панель управления" 
                                   Style="{StaticResource PageTitleStyle}" 
                                   VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0"/>
                    </Grid>
                </Border>

                <Border Margin="30,85,30,15" CornerRadius="10" Background="{StaticResource BackgroundSecondaryColor}" 
                       Effect="{StaticResource CardShadowEffect}">
                    <Frame x:Name="MainFrame" NavigationUIVisibility="Hidden" Padding="20" BorderThickness="0"/>
                </Border>

                <Canvas>
                    <Path Canvas.Right="0" Canvas.Bottom="0" Fill="{StaticResource PrimaryLightColor}" Opacity="0.03">
                        <Path.Data>
                            <PathGeometry>
                                <PathGeometry.Figures>
                                    <PathFigureCollection>
                                        <PathFigure StartPoint="0,40">
                                            <PathFigure.Segments>
                                                <PathSegmentCollection>
                                                    <BezierSegment Point1="200,0" Point2="400,60" Point3="600,20"/>
                                                    <BezierSegment Point1="800,0" Point2="1000,50" Point3="1200,10"/>
                                                    <LineSegment Point="1200,100"/>
                                                    <LineSegment Point="0,100"/>
                                                </PathSegmentCollection>
                                            </PathFigure.Segments>
                                        </PathFigure>
                                    </PathFigureCollection>
                                </PathGeometry.Figures>
                            </PathGeometry>
                        </Path.Data>
                    </Path>
                </Canvas>
            </Grid>
        </Grid>
    </Border>
</Window>